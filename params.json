{"name":"chef-monit","tagline":"Chef cookbook for monit package","body":"# chef-monit\r\n\r\n## Description\r\n\r\nInstalls the `monit` package from (http://mmonit.com/monit/).\r\n\r\n\r\n## Requirements\r\n\r\n### Supported Platforms\r\n\r\nThe following platforms are supported by this cookbook, meaning that the recipes run on these platforms without error:\r\n\r\n* Ubuntu\r\n* Debian\r\n* RedHat\r\n* CentOS\r\n* Scientific\r\n* Fedora\r\n* SUSE\r\n* Amazon\r\n\r\n\r\n## Recipes\r\n\r\n* `monit` - The default recipe. Sets up the service definition and default checks.\r\n\r\n\r\n## Resources\r\n\r\n### `monit_monitrc`\r\n\r\nThe following will create a monitrc configuration:\r\n\r\n```ruby\r\nmonit_monitrc \"ssh\" do\r\n  variables({ category: \"system\" })\r\nend\r\n```\r\n\r\nThe `name` parameter must match a file located in your templates directory. In the example above, this would be `ssh.monitrc.erb`.\r\n\r\nThe `variables` option within the block is optional, and can contain a list of key-value pairs to assign within your template.\r\n\r\n\r\n## Usage\r\n\r\nThis cookbook installs the monit components if not present, and pulls updates if they are installed on the system.\r\n\r\n\r\n## Attributes\r\n\r\n```ruby\r\n# Delay the start of polling when the service is started\r\ndefault[\"monit\"][\"start_delay\"] = 0\r\n\r\n# How frequently the monit daemon polls for changes.\r\ndefault[\"monit\"][\"polling_frequency\"] = 20\r\n\r\n# Use syslog for logging instead of a logfile.\r\ndefault[\"monit\"][\"use_syslog\"] = true\r\n\r\n# If not using syslog, the log file that monit will use.\r\ndefault[\"monit\"][\"logfile\"] = \"/var/log/monit.log\"\r\n\r\n# Where Monit stores unique Monit instance id\r\ndefault[\"monit\"][\"idfile\"] = \"/var/.monit.id\"\r\n\r\n# Where Monit stores Monit state file\r\ndefault[\"monit\"][\"statefile\"] = \"/var/lib/monit/state\"\r\n\r\n# Enable emails for internal monit alerts\r\ndefault[\"monit\"][\"mail_alerts\"] = true\r\n\r\n# Ignore alerts for specific events\r\n# Possible events include: action, checksum, connection, content, data, exec, fsflags, gid, icmp, instance, invalid, nonexist, permission, pid, ppid, resource, size, status, timeout, timestamp, uid, uptime.\r\ndefault[\"monit\"][\"alert_ignore_events\"] = []\r\n\r\n# Email address that will be notified of events.\r\ndefault[\"monit\"][\"alert_email\"] = \"root@localhost\"\r\n\r\n# Enable the web interface and define credentials.\r\ndefault[\"monit\"][\"web_interface\"] = {\r\n  enable:  true,\r\n  port:    2812,\r\n  address: \"localhost\",\r\n  allow:   [\"localhost\", \"admin:b1gbr0th3r\"]\r\n}\r\n\r\n# Email settings that will be used for notification of events.\r\ndefault[\"monit\"][\"mail\"] = {\r\n  hostname: \"localhost\",\r\n  port:     25,\r\n  username: nil,\r\n  password: nil,\r\n  encrypted_credentials: nil,\r\n  encrypted_credentials_data_bag: \"credentials\",\r\n  from:     \"monit@$HOST\",\r\n  subject:  \"$SERVICE $EVENT at $DATE\",\r\n  message:  \"Monit $ACTION $SERVICE at $DATE on $HOST,\\n\\n$DESCRIPTION\\n\\nDutifully,\\nMonit\",\r\n  security: nil,  # 'SSLV2'|'SSLV3'|'TLSV1'\r\n  timeout:  30\r\n}\r\n\r\ncase node[\"platform_family\"]\r\nwhen \"rhel\", \"fedora\", \"suse\"\r\n  default[\"monit\"][\"main_config_path\"] = \"/etc/monit.conf\"\r\n  default[\"monit\"][\"includes_dir\"] = \"/etc/monit.d\"\r\nelse\r\n  default[\"monit\"][\"main_config_path\"] = \"/etc/monit/monitrc\"\r\n  default[\"monit\"][\"includes_dir\"] = \"/etc/monit/conf.d\"\r\nend\r\n\r\n# The monit::default recipe will load these monit_monitrc resources automatically\r\n# NOTE setting this attribute at the default level will append values to the array\r\ndefault[\"monit\"][\"default_monitrc_configs\"] = %w[load ssh]\r\n\r\n# Whether the monit service should be reloaded when a configuration changes\r\ndefault[\"monit\"][\"reload_on_change\"] = true\r\n\r\n# `MONIT_OPTS` for /etc/default/monit\r\ndefault[\"monit\"][\"init_opts\"] = \"\"\r\n\r\n# specify a particular version of the monit package you want installed,\r\n# otherwise it will install the default. this value is ignored when performing a\r\n# source install.\r\ndefault[\"monit\"][\"version\"] = nil\r\n\r\n# source install specifics\r\ndefault[\"monit\"][\"source_install\"] = false\r\n\r\ndefault[\"monit\"][\"source\"][\"version\"] = \"5.7\"\r\ndefault[\"monit\"][\"source\"][\"prefix\"] = \"/usr/local\"\r\ndefault[\"monit\"][\"source\"][\"url\"] = \"https://mmonit.com/monit/dist/monit-5.7.tar.gz\"\r\ndefault[\"monit\"][\"source\"][\"checksum\"] = \"bb250ab011d805b5693972afdf95509e79bb3b390caa763275c9501f74b598a2\"\r\ndefault[\"monit\"][\"source\"][\"pam_support\"] = true\r\ndefault[\"monit\"][\"source\"][\"ssl_support\"] = true\r\ndefault[\"monit\"][\"source\"][\"large_file_support\"] = true\r\ndefault[\"monit\"][\"source\"][\"compiler_optimized\"] = true\r\n```\r\n\r\n## Contributors\r\n\r\nMany thanks go to the following [contributors](https://github.com/phlipper/chef-monit/graphs/contributors) who have helped to make this cookbook even better:\r\n\r\n* **[@werdan](https://github.com/werdan)**\r\n    * add support for redhat-flavored systems\r\n* **[@auser](https://github.com/auser)**\r\n    * add missing metadata\r\n* **[@arrowcircle](https://github.com/arrowcircle)**\r\n    * update syntax to be Ruby 1.8-compatible\r\n* **[@dwradcliffe](https://github.com/dwradcliffe)**\r\n    * typo fix for README\r\n    * fix logging logic\r\n    * whyrun support for monitrc provider\r\n    * support for reloading monit without restart\r\n    * don't render 'use address' if no address is provided\r\n    * fix attribute comments\r\n* **[@tjwallace](https://github.com/tjwallace)**\r\n    * load default monitrc configs from an attribute\r\n* **[@tomdz](https://github.com/tomdz)**\r\n    * Ruby 1.8.x compatibility fix\r\n    * add support for templates in different cookbooks\r\n* **[@alexism](https://github.com/alexism)**\r\n    * support other security protocols\r\n* **[@fixlr](https://github.com/fixlr)**\r\n    * add `mail_alerts` attribute\r\n* **[@darron](https://github.com/darron)**\r\n    * add descriptions to email notifications\r\n* **[@claco](https://github.com/claco)**\r\n    * add startup delay option to monit daemon config\r\n    * restart on default monitrc configs change\r\n    * restart monit service if the monit config changes\r\n    * fix platform family logic\r\n* **[@maciejgalkiewicz](https://github.com/maciejgalkiewicz)**\r\n    * fix logging logic\r\n* **[@pauloricardomg](https://github.com/pauloricardomg)**\r\n    * add `alert_ignore_events` attribute\r\n    * add `reload_on_change` attribute\r\n* **[@drywheat](https://github.com/drywheat)**\r\n    * support encrypted data bag for smtp credentials\r\n    * add support for installation from source vs. package\r\n* **[@esigler](https://github.com/esigler)**\r\n    * allow either style of monit startup flag to work\r\n* **[@evan2645](https://github.com/evan2645)**\r\n    * fix bug in which monit is not started during bootstrap\r\n* **[@mvdkleijn](https://github.com/mvdkleijn)**\r\n    * add settings for idfile and statefile\r\n* **[@mbanton](https://github.com/mbanton)**\r\n    * fix `statefile` attribute in `monitrc` template\r\n* **[@foxycoder](https://github.com/foxycoder)**\r\n    * add support for binary install\r\n* **[@ijin](https://github.com/ijin)**\r\n    * add `using_hostname` attribute\r\n    * better ssh support for Amazon Linux\r\n\r\n\r\n## Contributing\r\n\r\n1. Fork it\r\n2. Create your feature branch (`git checkout -b my-new-feature`)\r\n3. Commit your changes (`git commit -am 'Added some feature'`)\r\n4. Push to the branch (`git push origin my-new-feature`)\r\n5. Create new Pull Request\r\n\r\n\r\n## License\r\n\r\n**chef-monit**\r\n\r\n* Freely distributable and licensed under the MIT license\r\n* Copyright (c) 2011-2014 Phil Cohen (github@phlippers.net)\r\n","google":"UA-10172882-2","note":"Don't delete this file! It's used internally to help with page regeneration."}